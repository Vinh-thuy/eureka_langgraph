Architecture cible : Lisab â†” TWIN (plateforme agentique LangGraph)

Pour clarifier le modÃ¨le et rassurer tout le monde sur la rÃ©partition des rÃ´les et des stacks techniques :

â¸»

ğŸ”¹ RÃ´le de Lisab (Django)
	â€¢	Connecteur natif Teams â†’ @TWIN
	â€¢	Gestion identitÃ© / droits / contexte utilisateur (via Azure AD / Teams)
	â€¢	Construction et transmission vers TWIN de :
	â€¢	un user_id (utilisateur mÃ©tier)
	â€¢	un thread_id (fil de conversation Teams)
	â€¢	Logs dâ€™audit applicatif vers les outils groupe (Elastic / SIEM)

ğŸ‘‰ Lisab ne gÃ¨re pas la mÃ©moire conversationnelle, il fournit les identifiants qui permettront Ã  la plateforme TWIN de le faire proprement.

â¸»

ğŸ”¹ RÃ´le de la plateforme TWIN (LangGraph / LangChain)
	â€¢	Cerveau agentique : DeepAgent + sous-agents (Infra, Metrics, ITSM, etc.)
	â€¢	Persistance des sessions :
	â€¢	Session de conversation (par thread_id) : Ã©tat du graphe, contexte du fil @TWIN
	â€¢	Session utilisateur (par user_id) : mÃ©moire long terme propre Ã  chaque utilisateur
	â€¢	Gestion :
	â€¢	du raisonnement, du routing, des workflows techniques
	â€¢	de lâ€™historique des Ã©changes et du contexte LLM

ğŸ‘‰ Toute la mÃ©moire (intra-session et inter-session) vit cÃ´tÃ© TWIN / LangGraph.

â¸»

ğŸ”¹ Gestion des sessions : qui fait quoi ?
	â€¢	Session de conversation (@TWIN dans un thread Teams)
	â€¢	Identifiant : thread_id construit par Lisab
	â€¢	Persistance : gÃ©rÃ©e par LangGraph (checkpoints + historique)
	â€¢	Session utilisateur (mÃ©moire cross-conversation)
	â€¢	Identifiant : user_id fourni par Lisab
	â€¢	Persistance : gÃ©rÃ©e par LangChain / LangGraph via des mÃ©canismes de Memory / MessageHistory

â¸»

ğŸ”¹ Stacks techniques & briques utilisables cÃ´tÃ© TWIN
	â€¢	LangGraph
	â€¢	Gestion de lâ€™Ã©tat du graphe (GraphState)
	â€¢	Checkpoints persistÃ©s dans Postgres (ou Redis / autre backend)
	â€¢	Support natif des thread_id pour les sessions
	â€¢	LangChain
	â€¢	Memory : ConversationSummaryMemory, ConversationBufferMemory, etc.
	â€¢	MessageHistory stores : Postgres / Redis pour historiser les messages par user_id / thread_id
	â€¢	Infra persistance
	â€¢	Postgres : stockage des checkpoints et de lâ€™historique
	â€¢	Redis (optionnel) : cache / historique court terme
	â€¢	LangSmith : observabilitÃ©, tracing des runs agents / LLM
